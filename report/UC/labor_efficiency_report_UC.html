<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>UC门店2025年度人效分析报告</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', 'SimHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
        }
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.5);
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
        }
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
        }
        .section {
            background: white;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .section h2 {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            margin-top: 0;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .metric-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .metric-card .value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }
        .metric-card .label {
            font-size: 1.1em;
            color: #666;
        }
        .chart-container {
            text-align: center;
            margin: 30px 0;
        }
        .chart-container img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        table th, table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        table th {
            background-color: #667eea;
            color: white;
            font-weight: bold;
        }
        table tr:hover {
            background-color: #f5f5f5;
        }
        .highlight {
            background-color: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
            border-radius: 4px;
        }
        .insight {
            background-color: #d1ecf1;
            padding: 15px;
            border-left: 4px solid #0c5460;
            margin: 15px 0;
            border-radius: 4px;
        }
        .recommendation {
            background-color: #d4edda;
            padding: 15px;
            border-left: 4px solid #28a745;
            margin: 15px 0;
            border-radius: 4px;
        }
        .footer {
            text-align: center;
            color: #666;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }
        .chart-tabs {
            margin-top: 20px;
        }
        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #ddd;
        }
        .tab-button {
            padding: 12px 24px;
            background: #f0f0f0;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            color: #666;
            transition: all 0.3s;
        }
        .tab-button:hover {
            background: #e0e0e0;
        }
        .tab-button.active {
            background: white;
            color: #667eea;
            border-bottom-color: #667eea;
        }
        .confirm-btn {
            padding: 8px 20px;
            font-size: 1em;
            border: 2px solid rgba(255,255,255,0.8);
            border-radius: 5px;
            background: rgba(255,255,255,0.9);
            color: #667eea;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        .confirm-btn:hover {
            background: white;
            border-color: white;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .confirm-btn:active {
            transform: translateY(0);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .chart-image {
            text-align: center;
            margin: 20px 0;
        }
        .chart-image img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script>
        // Global variables
        var allData = [];
        var chartInstances = {};
        var currentFilteredData = [];
        
        // Initialize date selectors with default values
        document.addEventListener('DOMContentLoaded', function() {
            // Load all data
            try {
                var dataElement = document.getElementById('allData');
                if (dataElement) {
                    allData = JSON.parse(dataElement.textContent);
                }
            } catch (e) {
                console.error('Error loading data:', e);
                return;
            }
            
            var startSelect = document.getElementById('startDate');
            var endSelect = document.getElementById('endDate');
            
            if (allData && allData.length > 0) {
                // Sort data by start_date to ensure correct first and last dates
                var sortedData = allData.slice().sort(function(a, b) {
                    return new Date(a.start_date) - new Date(b.start_date);
                });
                // Set default to first and last dates
                var firstDate = sortedData[0].start_date.split('T')[0];
                var lastDate = sortedData[sortedData.length - 1].start_date.split('T')[0];
                startSelect.value = firstDate;
                endSelect.value = lastDate;
                
                // Wait for Chart.js to be ready, then update
                function initializeCharts() {
                    if (typeof Chart !== 'undefined') {
                        updateDateRange();
                        // Ensure labor cost chart is rendered on initial load
                        setTimeout(function() {
                            // Force chart update after DOM is ready
                            var currentData = currentFilteredData.length > 0 ? currentFilteredData : allData;
                            if (currentData.length > 0) {
                                updateCharts(currentData);
                                // Force resize after a short delay to ensure canvas is visible
                                setTimeout(function() {
                                    if (chartInstances['labor_cost']) {
                                        chartInstances['labor_cost'].resize();
                                    }
                                }, 300);
                            }
                        }, 300);
                    } else {
                        setTimeout(initializeCharts, 100);
                    }
                }
                initializeCharts();
            }
        });
        
        function switchTab(tabName, buttonElement) {
            // Hide all tabs
            var tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Remove active from all buttons
            var buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab
            document.getElementById('tab-' + tabName).classList.add('active');
            buttonElement.classList.add('active');
            
            // Update charts for the active tab with current filtered data
            updateCharts(currentFilteredData.length > 0 ? currentFilteredData : allData);
        }
        
        function updateDateRange() {
            var startDate = document.getElementById('startDate').value;
            var endDate = document.getElementById('endDate').value;
            
            if (!startDate || !endDate) {
                return;
            }
            
            // Filter data by date range
            var filteredData = allData.filter(function(item) {
                var itemStart = item.start_date.split('T')[0];
                return itemStart >= startDate && itemStart <= endDate;
            });
            
            // Store current filtered data for use by switchTab
            currentFilteredData = filteredData;
            
            // Update date range display
            var startDisplay = document.querySelector('#startDate option:checked').text;
            var endDisplay = document.querySelector('#endDate option:checked').text;
            document.getElementById('dateRangeDisplay').textContent = startDisplay + ' - ' + endDisplay;
            
            // Update all sections with filtered data
            updateSummaryMetrics(filteredData);
            updateKeyMetrics(filteredData);
            updatePeriodTable(filteredData);
            updateRecentPayrollAnalysis(filteredData);
            updateCharts(filteredData);
        }
        
        function updateSummaryMetrics(data) {
            if (data.length === 0) return;
            
            var totalSales = data.reduce((sum, item) => sum + (item.net_sales || 0), 0);
            var totalLaborCost = data.reduce((sum, item) => sum + (item.total_labor_cost || 0), 0);
            var avgLaborCostPct = totalSales > 0 ? (totalLaborCost / totalSales * 100) : 0;
            var totalHours = data.reduce((sum, item) => sum + (item.total_Labor_hour || 0), 0);
            var avgSplh = data.reduce((sum, item) => sum + (item.sales_per_labor_hour || 0), 0) / data.length;
            
            // Update metric cards
            var cards = document.querySelectorAll('.metric-card .value');
            if (cards.length >= 5) {
                cards[0].textContent = '$' + totalSales.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                cards[1].textContent = '$' + totalLaborCost.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                cards[2].textContent = avgLaborCostPct.toFixed(2) + '%';
                cards[3].textContent = totalHours.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                cards[4].textContent = '$' + avgSplh.toFixed(2);
            }
        }
        
        function updateKeyMetrics(data) {
            if (data.length === 0) return;
            
            var laborCostPcts = data.map(item => item.labor_cost_pct || 0);
            var splhs = data.map(item => item.sales_per_labor_hour || 0);
            var avgLaborCostPct = laborCostPcts.reduce((a, b) => a + b, 0) / laborCostPcts.length;
            var minLaborCostPct = Math.min(...laborCostPcts);
            var maxLaborCostPct = Math.max(...laborCostPcts);
            var minPeriod = data[laborCostPcts.indexOf(minLaborCostPct)];
            var maxPeriod = data[laborCostPcts.indexOf(maxLaborCostPct)];
            var stdDev = Math.sqrt(laborCostPcts.reduce((sq, n) => sq + Math.pow(n - avgLaborCostPct, 2), 0) / laborCostPcts.length);
            var avgSplh = splhs.reduce((a, b) => a + b, 0) / splhs.length;
            var maxSplh = Math.max(...splhs);
            var minSplh = Math.min(...splhs);
            var maxSplhPeriod = data[splhs.indexOf(maxSplh)];
            var minSplhPeriod = data[splhs.indexOf(minSplh)];
            var avgOvertimePct = data.reduce((sum, item) => sum + (item.overtime_pct || 0), 0) / data.length;
            var totalOvertime = data.reduce((sum, item) => sum + (item.OT_hour || 0), 0);
            var totalLaborHours = data.reduce((sum, item) => sum + (item.total_Labor_hour || 0), 0);
            // Calculate overall OT percentage: total OT hours / total labor hours
            var overallOtPct = totalLaborHours > 0 ? (totalOvertime / totalLaborHours * 100) : 0;
            var avgHC = data.reduce((sum, item) => sum + (item.HC || 0), 0) / data.length;
            
            // Update key metrics table
            var table = document.getElementById('keyMetricsTable');
            if (table) {
                var rows = table.getElementsByTagName('tr');
                if (rows.length > 1) rows[1].cells[1].textContent = data.length + ' 个';
                if (rows.length > 2) rows[2].cells[1].textContent = avgLaborCostPct.toFixed(2) + '%';
                if (rows.length > 3) rows[3].cells[1].textContent = minLaborCostPct.toFixed(2) + '% (时间段: ' + (minPeriod ? minPeriod.Period : '') + ')';
                if (rows.length > 4) rows[4].cells[1].textContent = maxLaborCostPct.toFixed(2) + '% (时间段: ' + (maxPeriod ? maxPeriod.Period : '') + ')';
                if (rows.length > 5) rows[5].cells[1].textContent = stdDev.toFixed(2) + '%';
                if (rows.length > 6) rows[6].cells[1].textContent = '$' + avgSplh.toFixed(2);
                if (rows.length > 7) rows[7].cells[1].textContent = '$' + maxSplh.toFixed(2) + ' (时间段: ' + (maxSplhPeriod ? maxSplhPeriod.Period : '') + ')';
                if (rows.length > 8) rows[8].cells[1].textContent = '$' + minSplh.toFixed(2) + ' (时间段: ' + (minSplhPeriod ? minSplhPeriod.Period : '') + ')';
                if (rows.length > 9) rows[9].cells[1].textContent = avgOvertimePct.toFixed(2) + '%';
                if (rows.length > 10) rows[10].cells[1].textContent = totalOvertime.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2}) + ' 小时';
                if (rows.length > 11) rows[11].cells[1].textContent = overallOtPct.toFixed(2) + '%';
                if (rows.length > 12) rows[12].cells[1].textContent = avgHC.toFixed(1) + ' 人';
            }
        }
        
        function updatePeriodTable(data) {
            var tbody = document.getElementById('periodTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // Calculate change percentages
            var sortedData = data.slice().sort((a, b) => new Date(a.start_date) - new Date(b.start_date));
            
            for (var i = 0; i < sortedData.length; i++) {
                var row = sortedData[i];
                var otChange = 0;
                var costChange = 0;
                
                if (i > 0) {
                    var prevRow = sortedData[i-1];
                    if (prevRow.OT_hour > 0) {
                        otChange = ((row.OT_hour - prevRow.OT_hour) / prevRow.OT_hour) * 100;
                    }
                    if (prevRow.total_labor_cost > 0) {
                        costChange = ((row.total_labor_cost - prevRow.total_labor_cost) / prevRow.total_labor_cost) * 100;
                    }
                }
                
                var otColor = otChange > 0 ? '#e74c3c' : (otChange < 0 ? '#27ae60' : '#333');
                var otSign = otChange > 0 ? '+' : '';
                var otText = i > 0 ? otSign + otChange.toFixed(2) + '%' : '-';
                
                var costColor = costChange > 0 ? '#e74c3c' : (costChange < 0 ? '#27ae60' : '#333');
                var costSign = costChange > 0 ? '+' : '';
                var costText = i > 0 ? costSign + costChange.toFixed(2) + '%' : '-';
                
                var tr = document.createElement('tr');
                tr.setAttribute('data-period', row.Period);
                tr.innerHTML = `
                    <td>${row.Period}</td>
                    <td>$${(row.net_sales || 0).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td>$${(row.total_labor_cost || 0).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td>${(row.labor_cost_pct || 0).toFixed(2)}%</td>
                    <td>$${(row.sales_per_labor_hour || 0).toFixed(2)}</td>
                    <td>${(row.total_Labor_hour || 0).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td>${(row.OT_hour || 0).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td>${(row.overtime_pct || 0).toFixed(2)}%</td>
                    <td>${(row.HC || 0).toFixed(0)}</td>
                    <td style="color: ${otColor}; font-weight: bold;">${otText}</td>
                    <td style="color: ${costColor}; font-weight: bold;">${costText}</td>
                `;
                tbody.appendChild(tr);
            }
        }
        
        function updateRecentPayrollAnalysis(data) {
            var analysisDiv = document.getElementById('recentPayrollAnalysis');
            if (!analysisDiv || !data || data.length === 0) {
                if (analysisDiv) {
                    analysisDiv.innerHTML = '<p>暂无数据</p>';
                }
                return;
            }
            
            // Get the last payroll period (sorted by start_date)
            var sortedData = data.slice().sort((a, b) => new Date(a.start_date) - new Date(b.start_date));
            var lastPayroll = sortedData[sortedData.length - 1];
            
            if (!lastPayroll) {
                if (analysisDiv) {
                    analysisDiv.innerHTML = '<p>暂无数据</p>';
                }
                return;
            }
            
            // Find previous payroll for comparison
            var prevPayroll = sortedData.length > 1 ? sortedData[sortedData.length - 2] : null;
            
            // Format period string (e.g., "11/10-11/23" -> "11/10–11/23" with en dash)
            var period = (lastPayroll.Period || '').replace(/-/g, '–');
            
            // Calculate change percentages
            var salesChange = 0;
            var laborCostChange = 0;
            var laborPctChange = 0;
            var splhChange = 0;
            var otChange = 0;
            
            if (prevPayroll) {
                if (prevPayroll.net_sales > 0) {
                    salesChange = ((lastPayroll.net_sales - prevPayroll.net_sales) / prevPayroll.net_sales) * 100;
                }
                if (prevPayroll.total_labor_cost > 0) {
                    laborCostChange = ((lastPayroll.total_labor_cost - prevPayroll.total_labor_cost) / prevPayroll.total_labor_cost) * 100;
                }
                if (prevPayroll.labor_cost_pct > 0) {
                    laborPctChange = lastPayroll.labor_cost_pct - prevPayroll.labor_cost_pct;
                }
                if (prevPayroll.sales_per_labor_hour > 0) {
                    splhChange = ((lastPayroll.sales_per_labor_hour - prevPayroll.sales_per_labor_hour) / prevPayroll.sales_per_labor_hour) * 100;
                }
                if (prevPayroll.OT_hour > 0) {
                    otChange = ((lastPayroll.OT_hour - prevPayroll.OT_hour) / prevPayroll.OT_hour) * 100;
                }
            }
            
            // Determine efficiency status (上升/下降/持平)
            var efficiencyStatus = '持平';
            // Use SPLH change as primary indicator, with labor cost % as secondary
            if (prevPayroll) {
                if (splhChange > 2 || (splhChange > 0 && laborPctChange < -0.5)) {
                    efficiencyStatus = '上升';
                } else if (splhChange < -2 || (splhChange < 0 && laborPctChange > 0.5)) {
                    efficiencyStatus = '下降';
                }
            }
            
            // Format numbers
            var netSales = '$' + (lastPayroll.net_sales || 0).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            var laborCost = '$' + (lastPayroll.total_labor_cost || 0).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            var laborCostPct = (lastPayroll.labor_cost_pct || 0).toFixed(2) + '%';
            var totalHours = (lastPayroll.total_Labor_hour || 0).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2}) + ' 小时';
            var splh = '$' + (lastPayroll.sales_per_labor_hour || 0).toFixed(2);
            var otHours = (lastPayroll.OT_hour || 0).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2}) + ' 小时';
            var hc = (lastPayroll.HC || 0).toFixed(0) + ' 人';
            
            // Calculate average hours per employee
            var avgHoursPerEmployee = lastPayroll.HC > 0 ? ((lastPayroll.total_Labor_hour || 0) / lastPayroll.HC).toFixed(2) + ' 小时' : '0.00 小时';
            
            // Format change percentages
            function formatChange(change, isPercentage) {
                if (!prevPayroll) return '-';
                var sign = change > 0 ? '+' : '';
                var absChange = Math.abs(change).toFixed(2);
                return sign + absChange + (isPercentage ? '%' : '');
            }
            
            var salesChangeText = formatChange(salesChange, true);
            var laborCostChangeText = formatChange(laborCostChange, true);
            var laborPctChangeText = formatChange(laborPctChange, false) + '%';
            var splhChangeText = formatChange(splhChange, true);
            var otChangeText = formatChange(otChange, true);
            
            // Generate HTML in the new format
            var html = '<div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; margin-top: 15px;">';
            html += '<h3 style="margin-top: 0;">最新一期 Payroll 运行概览（' + period + '）</h3>';
            html += '<p style="font-size: 1.1em; margin-bottom: 20px;"><strong>人效状态：</strong><span style="color: ' + (efficiencyStatus === '上升' ? '#27ae60' : efficiencyStatus === '下降' ? '#e74c3c' : '#f39c12') + '; font-weight: bold;">' + efficiencyStatus + '</span></p>';
            
            html += '<div style="margin-bottom: 25px;">';
            html += '<h4>① 销售与人工成本</h4>';
            html += '<ul style="list-style: none; padding-left: 0; line-height: 2;">';
            html += '<li> 净销售额：' + netSales + '（环比 ' + salesChangeText + '）</li>';
            html += '<li> 人工成本：' + laborCost + '（环比 ' + laborCostChangeText + '）</li>';
            html += '<li> 人工成本占比：' + laborCostPct + '（环比 ' + laborPctChangeText + '）</li>';
            html += '</ul>';
            html += '</div>';
            
            html += '<div style="margin-bottom: 25px;">';
            html += '<h4>② 工时与人力结构</h4>';
            html += '<ul style="list-style: none; padding-left: 0; line-height: 2;">';
            html += '<li> 总工时：' + totalHours + '</li>';
            html += '<li> 员工人数：' + hc + '</li>';
            html += '<li> 人均工时：' + avgHoursPerEmployee + '</li>';
            html += '</ul>';
            html += '</div>';
            
            html += '<div style="margin-bottom: 15px;">';
            html += '<h4>③ 效率与加班情况</h4>';
            html += '<ul style="list-style: none; padding-left: 0; line-height: 2;">';
            html += '<li> SPLH（每小时销售额）：' + splh + '（环比 ' + splhChangeText + '）</li>';
            html += '<li> 加班工时：' + otHours + '</li>';
            html += '<li> 加班工时变化：' + otChangeText + '</li>';
            html += '</ul>';
            html += '</div>';
            
            html += '</div>';
            
            analysisDiv.innerHTML = html;
        }
        
        function updateCharts(data) {
            // Check if Chart.js is loaded
            if (typeof Chart === 'undefined') {
                console.error('Chart.js is not loaded');
                return;
            }
            
            // Get filtered data or use all data
            var chartData = data || allData;
            if (!chartData || chartData.length === 0) {
                console.warn('No chart data available');
                return;
            }
            
            // Sort data by start_date
            var sortedData = chartData.slice().sort((a, b) => new Date(a.start_date) - new Date(b.start_date));
            var periodLabels = sortedData.map(item => item.Period);
            
            // Update charts for each tab
            updateLaborCostChart(sortedData, periodLabels);
            updateSplhChart(sortedData, periodLabels);
            updateOvertimeChart(sortedData, periodLabels);
            
            // Ensure the active tab's chart is visible and rendered
            var activeTab = document.querySelector('.tab-content.active');
            if (activeTab) {
                var activeTabId = activeTab.id;
                // Force resize for all charts, especially the active one
                setTimeout(function() {
                    if (activeTabId === 'tab-labor_cost' && chartInstances['labor_cost']) {
                        chartInstances['labor_cost'].resize();
                    } else if (activeTabId === 'tab-splh' && chartInstances['splh']) {
                        chartInstances['splh'].resize();
                    } else if (activeTabId === 'tab-overtime' && chartInstances['overtime']) {
                        chartInstances['overtime'].resize();
                    }
                }, 100);
            }
        }
        
        function updateLaborCostChart(data, labels) {
            var ctx = document.getElementById('laborCostChart');
            if (!ctx) return;
            
            if (chartInstances['labor_cost']) {
                chartInstances['labor_cost'].destroy();
            }
            
            chartInstances['labor_cost'] = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'net_sales',
                            data: data.map(item => item.net_sales || 0),
                            backgroundColor: 'rgba(155, 89, 182, 0.7)',
                            yAxisID: 'y'
                        },
                        {
                            label: 'labor_cost',
                            data: data.map(item => item.total_labor_cost || 0),
                            backgroundColor: 'rgba(255, 165, 0, 0.7)',
                            yAxisID: 'y'
                        },
                        {
                            label: 'labor_cost/net_sales',
                            data: data.map(item => item.labor_cost_pct || 0),
                            type: 'line',
                            borderColor: 'rgb(231, 76, 60)',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            yAxisID: 'y1',
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Bi-Weekly Labor Report',
                            font: { size: 16, weight: 'bold' }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    var label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.datasetIndex < 2) {
                                        label += '$' + context.parsed.y.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                                    } else {
                                        label += context.parsed.y.toFixed(2) + '%';
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'labor_cost | net_sales ($)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'labor_cost/net_sales (%)'
                            },
                            grid: {
                                drawOnChartArea: false
                            }
                        },
                        x: {
                            ticks: {
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });
        }
        
        function updateSplhChart(data, labels) {
            var ctx = document.getElementById('splhChart');
            if (!ctx) return;
            
            if (chartInstances['splh']) {
                chartInstances['splh'].destroy();
            }
            
            chartInstances['splh'] = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'SPLH',
                            data: data.map(item => item.sales_per_labor_hour || 0),
                            backgroundColor: 'rgba(52, 152, 219, 0.7)',
                            yAxisID: 'y'
                        },
                        {
                            label: 'net_sales',
                            data: data.map(item => item.net_sales || 0),
                            backgroundColor: 'rgba(255, 165, 0, 0.7)',
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'SPLH and net_sales by Period',
                            font: { size: 16, weight: 'bold' }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    var label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.datasetIndex === 0) {
                                        label += '$' + context.parsed.y.toFixed(2);
                                    } else {
                                        label += '$' + context.parsed.y.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'SPLH ($)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'net_sales ($)'
                            },
                            grid: {
                                drawOnChartArea: false
                            }
                        },
                        x: {
                            ticks: {
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });
        }
        
        function updateOvertimeChart(data, labels) {
            var ctx = document.getElementById('overtimeChart');
            if (!ctx) return;
            
            if (chartInstances['overtime']) {
                chartInstances['overtime'].destroy();
            }
            
            // Calculate percentages
            var otPcts = data.map(item => {
                var total = item.total_Labor_hour || 0;
                var ot = item.OT_hour || 0;
                return total > 0 ? (ot / total * 100) : 0;
            });
            var regularPcts = data.map(item => {
                var total = item.total_Labor_hour || 0;
                var ot = item.OT_hour || 0;
                return total > 0 ? ((total - ot) / total * 100) : 0;
            });
            
            chartInstances['overtime'] = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'total_Labor_hour',
                            data: regularPcts,
                            backgroundColor: 'rgba(46, 204, 113, 0.7)',
                            stack: 'stack1'
                        },
                        {
                            label: 'OT_hour',
                            data: otPcts,
                            backgroundColor: 'rgba(255, 215, 0, 0.7)',
                            stack: 'stack1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'OT_hour and total_Labor_hour by Period',
                            font: { size: 16, weight: 'bold' }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    var label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += context.parsed.y.toFixed(2) + '%';
                                    return label;
                                },
                                afterBody: function(context) {
                                    var index = context[0].dataIndex;
                                    var item = data[index];
                                    return [
                                        'OT: ' + (item.OT_hour || 0).toFixed(0) + 'h',
                                        'Total: ' + (item.total_Labor_hour || 0).toFixed(0) + 'h'
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            ticks: {
                                maxRotation: 45,
                                minRotation: 45
                            }
                        },
                        y: {
                            stacked: true,
                            max: 100,
                            title: {
                                display: true,
                                text: '百分比 (%)'
                            }
                        }
                    }
                }
            });
        }
    </script>
</head>
<body>
    <div class="header">
        <a href="/index.html" class="back-button">← 返回主界面</a>
        <h1>UC门店2025年度人效分析报告</h1>
        <div style="margin-top: 20px; display: flex; align-items: center; justify-content: center; gap: 15px; flex-wrap: wrap;">
            <label for="startDate" style="font-size: 1.1em;">分析期间：</label>
            <select id="startDate" style="padding: 8px 15px; font-size: 1em; border: 2px solid rgba(255,255,255,0.5); border-radius: 5px; background: rgba(255,255,255,0.2); color: white; cursor: pointer;">
                <option value="">选择开始日期</option>
                <option value="2024-12-30">2024年12月30日</option>
                <option value="2025-01-13">2025年01月13日</option>
                <option value="2025-01-27">2025年01月27日</option>
                <option value="2025-02-10">2025年02月10日</option>
                <option value="2025-02-24">2025年02月24日</option>
                <option value="2025-03-10">2025年03月10日</option>
                <option value="2025-03-24">2025年03月24日</option>
                <option value="2025-04-07">2025年04月07日</option>
                <option value="2025-04-21">2025年04月21日</option>
                <option value="2025-05-05">2025年05月05日</option>
                <option value="2025-05-19">2025年05月19日</option>
                <option value="2025-06-02">2025年06月02日</option>
                <option value="2025-06-16">2025年06月16日</option>
                <option value="2025-06-30">2025年06月30日</option>
                <option value="2025-07-14">2025年07月14日</option>
                <option value="2025-07-28">2025年07月28日</option>
                <option value="2025-08-11">2025年08月11日</option>
                <option value="2025-08-25">2025年08月25日</option>
                <option value="2025-09-08">2025年09月08日</option>
                <option value="2025-09-22">2025年09月22日</option>
                <option value="2025-10-06">2025年10月06日</option>
                <option value="2025-10-22">2025年10月22日</option>
                <option value="2025-11-03">2025年11月03日</option>
                <option value="2025-11-17">2025年11月17日</option>
                <option value="2025-12-01">2025年12月01日</option>
                <option value="2025-12-15">2025年12月15日</option>
                <option value="2025-12-29">2025年12月29日</option>
            </select>
            <span style="font-size: 1.1em;">至</span>
            <select id="endDate" style="padding: 8px 15px; font-size: 1em; border: 2px solid rgba(255,255,255,0.5); border-radius: 5px; background: rgba(255,255,255,0.2); color: white; cursor: pointer;">
                <option value="">选择结束日期</option>
                <option value="2024-12-30">2024年12月30日</option>
                <option value="2025-01-13">2025年01月13日</option>
                <option value="2025-01-27">2025年01月27日</option>
                <option value="2025-02-10">2025年02月10日</option>
                <option value="2025-02-24">2025年02月24日</option>
                <option value="2025-03-10">2025年03月10日</option>
                <option value="2025-03-24">2025年03月24日</option>
                <option value="2025-04-07">2025年04月07日</option>
                <option value="2025-04-21">2025年04月21日</option>
                <option value="2025-05-05">2025年05月05日</option>
                <option value="2025-05-19">2025年05月19日</option>
                <option value="2025-06-02">2025年06月02日</option>
                <option value="2025-06-16">2025年06月16日</option>
                <option value="2025-06-30">2025年06月30日</option>
                <option value="2025-07-14">2025年07月14日</option>
                <option value="2025-07-28">2025年07月28日</option>
                <option value="2025-08-11">2025年08月11日</option>
                <option value="2025-08-25">2025年08月25日</option>
                <option value="2025-09-08">2025年09月08日</option>
                <option value="2025-09-22">2025年09月22日</option>
                <option value="2025-10-06">2025年10月06日</option>
                <option value="2025-10-22">2025年10月22日</option>
                <option value="2025-11-03">2025年11月03日</option>
                <option value="2025-11-17">2025年11月17日</option>
                <option value="2025-12-01">2025年12月01日</option>
                <option value="2025-12-15">2025年12月15日</option>
                <option value="2025-12-29">2025年12月29日</option>
            </select>
            <button id="confirmDateBtn" onclick="updateDateRange()" class="confirm-btn" style="margin-left: 10px;">确认</button>
            <span id="dateRangeDisplay" style="font-size: 1.1em; margin-left: 10px;">2024年12月30日 - 2025年12月29日</span>
        </div>
        <p>报告生成时间：2026年01月17日</p>
    </div>
    
    <!-- Embed all data as JSON for JavaScript filtering -->
    <script type="application/json" id="allData">
[
  {
    "Period": "12/30-1/12",
    "Tips": 9223.38,
    "service_fee": null,
    "UC_net_sales": 132630.48,
    "UC_totalPayroll": 47958.91,
    "Tips_Distributed": 10199.91,
    "if_match": 976.53,
    "labor_cost": 37759.0,
    "labor_cost/net_sales": 0.2847,
    "total_Labor_hour": 1633.01,
    "OT_hour": 238.28,
    "SPLH": 81.22,
    "HC": 31.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": 518.36,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 518.36,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 38277.36,
    "TotalLaborCost/NetSales": 0.2886015341,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2024-12-30T00:00:00",
    "end_date": "2025-01-12T00:00:00",
    "net_sales": 132630.48,
    "MP_LaborCost": 37759.0,
    "MP_TotalLaborCostExcludingTips": 38277.36,
    "total_labor_cost": 38277.36,
    "labor_cost_pct": 28.860153412699702,
    "sales_per_labor_hour": 81.21841262453997,
    "labor_cost_per_hour": 23.439758482801697,
    "overtime_pct": 14.591459942070165,
    "period_midpoint": "2025-01-05T12:00:00"
  },
  {
    "Period": "1/13-1/26",
    "Tips": 8291.79,
    "service_fee": null,
    "UC_net_sales": 126827.19,
    "UC_totalPayroll": 43329.06,
    "Tips_Distributed": 9013.45,
    "if_match": 721.66,
    "labor_cost": 34315.61,
    "labor_cost/net_sales": 0.2706,
    "total_Labor_hour": 1453.07,
    "OT_hour": 185.66,
    "SPLH": 87.28,
    "HC": 31.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": 545.88,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 545.88,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 34861.49,
    "TotalLaborCost/NetSales": 0.2748739446,
    "Unnamed: 22": null,
    "UC（Union City）": "劳动成本区间：21.05% ~ 28.47%",
    "start_date": "2025-01-13T00:00:00",
    "end_date": "2025-01-26T00:00:00",
    "net_sales": 126827.19,
    "MP_LaborCost": 34315.61,
    "MP_TotalLaborCostExcludingTips": 34861.49,
    "total_labor_cost": 34861.49,
    "labor_cost_pct": 27.487394461708092,
    "sales_per_labor_hour": 87.28223003709388,
    "labor_cost_per_hour": 23.991610865271458,
    "overtime_pct": 12.777085756364112,
    "period_midpoint": "2025-01-19T12:00:00"
  },
  {
    "Period": "1/27-2/9",
    "Tips": 7050.34,
    "service_fee": null,
    "UC_net_sales": 106172.13,
    "UC_totalPayroll": 37818.8,
    "Tips_Distributed": 7823.43,
    "if_match": 773.09,
    "labor_cost": 29995.37,
    "labor_cost/net_sales": 0.2825,
    "total_Labor_hour": 1347.34,
    "OT_hour": 153.32,
    "SPLH": 78.8,
    "HC": 31.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 0.0,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 29995.37,
    "TotalLaborCost/NetSales": 0.2825164193,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-01-27T00:00:00",
    "end_date": "2025-02-09T00:00:00",
    "net_sales": 106172.13,
    "MP_LaborCost": 29995.37,
    "MP_TotalLaborCostExcludingTips": 29995.37,
    "total_labor_cost": 29995.37,
    "labor_cost_pct": 28.251641932774636,
    "sales_per_labor_hour": 78.80128994908488,
    "labor_cost_per_hour": 22.262658274822986,
    "overtime_pct": 11.379458785458755,
    "period_midpoint": "2025-02-02T12:00:00"
  },
  {
    "Period": "2/10-2/23",
    "Tips": 7404.42,
    "service_fee": null,
    "UC_net_sales": 116468.5,
    "UC_totalPayroll": 35120.53,
    "Tips_Distributed": 6644.96,
    "if_match": -759.46,
    "labor_cost": 28475.57,
    "labor_cost/net_sales": 0.2445,
    "total_Labor_hour": 1289.18,
    "OT_hour": 151.97,
    "SPLH": 90.34,
    "HC": 22.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": 4581.15,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 4581.15,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 33056.72,
    "TotalLaborCost/NetSales": 0.283825412,
    "Unnamed: 22": null,
    "UC（Union City）": "SPLH 波动范围：$78.80 ~ $144.27",
    "start_date": "2025-02-10T00:00:00",
    "end_date": "2025-02-23T00:00:00",
    "net_sales": 116468.5,
    "MP_LaborCost": 28475.57,
    "MP_TotalLaborCostExcludingTips": 33056.72,
    "total_labor_cost": 33056.72,
    "labor_cost_pct": 28.382541202127616,
    "sales_per_labor_hour": 90.34308630292124,
    "labor_cost_per_hour": 25.64166369320033,
    "overtime_pct": 11.788113374393024,
    "period_midpoint": "2025-02-16T12:00:00"
  },
  {
    "Period": "2/24-3/9",
    "Tips": 8074.89,
    "service_fee": null,
    "UC_net_sales": 111036.57,
    "UC_totalPayroll": 34875.47,
    "Tips_Distributed": 6977.99,
    "if_match": -1096.9,
    "labor_cost": 27897.48,
    "labor_cost/net_sales": 0.2512,
    "total_Labor_hour": 1129.8,
    "OT_hour": 20.66,
    "SPLH": 98.28,
    "HC": 19.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 0.0,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 27897.48,
    "TotalLaborCost/NetSales": 0.2512458733,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-02-24T00:00:00",
    "end_date": "2025-03-09T00:00:00",
    "net_sales": 111036.57,
    "MP_LaborCost": 27897.48,
    "MP_TotalLaborCostExcludingTips": 27897.48,
    "total_labor_cost": 27897.48,
    "labor_cost_pct": 25.124587331903353,
    "sales_per_labor_hour": 98.27984599044079,
    "labor_cost_per_hour": 24.692405735528414,
    "overtime_pct": 1.8286422375641709,
    "period_midpoint": "2025-03-02T12:00:00"
  },
  {
    "Period": "3/10-3/23",
    "Tips": 9243.83,
    "service_fee": null,
    "UC_net_sales": 115249.38,
    "UC_totalPayroll": 39516.67,
    "Tips_Distributed": 11292.9,
    "if_match": 2049.07,
    "labor_cost": 28223.77,
    "labor_cost/net_sales": 0.2449,
    "total_Labor_hour": 1084.58,
    "OT_hour": 25.0,
    "SPLH": 106.26,
    "HC": 22.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 0.0,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 28223.77,
    "TotalLaborCost/NetSales": 0.2448930311,
    "Unnamed: 22": null,
    "UC（Union City）": "问题点：Tips匹配金额长期偏差较大；部分期间劳时偏高但产出不匹配。",
    "start_date": "2025-03-10T00:00:00",
    "end_date": "2025-03-23T00:00:00",
    "net_sales": 115249.38,
    "MP_LaborCost": 28223.77,
    "MP_TotalLaborCostExcludingTips": 28223.77,
    "total_labor_cost": 28223.77,
    "labor_cost_pct": 24.489303109483103,
    "sales_per_labor_hour": 106.2617603127478,
    "labor_cost_per_hour": 26.02276457246123,
    "overtime_pct": 2.3050397388850987,
    "period_midpoint": "2025-03-16T12:00:00"
  },
  {
    "Period": "3/24-4/6",
    "Tips": 7756.98,
    "service_fee": null,
    "UC_net_sales": 114338.78,
    "UC_totalPayroll": 32277.72,
    "Tips_Distributed": 8209.82,
    "if_match": 452.84,
    "labor_cost": 24067.9,
    "labor_cost/net_sales": 0.2105,
    "total_Labor_hour": 950.88,
    "OT_hour": 32.0,
    "SPLH": 120.25,
    "HC": 15.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": 528.76,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 528.76,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 24596.66,
    "TotalLaborCost/NetSales": 0.215120889,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-03-24T00:00:00",
    "end_date": "2025-04-06T00:00:00",
    "net_sales": 114338.78,
    "MP_LaborCost": 24067.9,
    "MP_TotalLaborCostExcludingTips": 24596.66,
    "total_labor_cost": 24596.66,
    "labor_cost_pct": 21.51208889932182,
    "sales_per_labor_hour": 120.24522547534914,
    "labor_cost_per_hour": 25.86725980144708,
    "overtime_pct": 3.3653037186606087,
    "period_midpoint": "2025-03-30T12:00:00"
  },
  {
    "Period": "4/7-4/20",
    "Tips": 6539.9,
    "service_fee": null,
    "UC_net_sales": 93817.95,
    "UC_totalPayroll": 26812.73,
    "Tips_Distributed": 6700.0,
    "if_match": 160.1,
    "labor_cost": 20112.73,
    "labor_cost/net_sales": 0.2144,
    "total_Labor_hour": 793.66,
    "OT_hour": 0.0,
    "SPLH": 118.21,
    "HC": 16.0,
    "Payroll_Dismissal": 633.95,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": 3692.39,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 4326.34,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 24439.07,
    "TotalLaborCost/NetSales": 0.2604946068,
    "Unnamed: 22": null,
    "UC（Union City）": "图表趋势：SPLH 与 Labor Cost 呈一定反向趋势，说明效率可优化。",
    "start_date": "2025-04-07T00:00:00",
    "end_date": "2025-04-20T00:00:00",
    "net_sales": 93817.95,
    "MP_LaborCost": 20112.73,
    "MP_TotalLaborCostExcludingTips": 24439.07,
    "total_labor_cost": 24439.07,
    "labor_cost_pct": 26.049460684229402,
    "sales_per_labor_hour": 118.20924577274904,
    "labor_cost_per_hour": 30.79287100269637,
    "overtime_pct": 0.0,
    "period_midpoint": "2025-04-13T12:00:00"
  },
  {
    "Period": "4/21-5/4",
    "Tips": 6253.45,
    "service_fee": null,
    "UC_net_sales": 95712.79,
    "UC_totalPayroll": 32139.15,
    "Tips_Distributed": 7098.31,
    "if_match": 844.86,
    "labor_cost": 25040.84,
    "labor_cost/net_sales": 0.2616,
    "total_Labor_hour": 997.1,
    "OT_hour": 22.0,
    "SPLH": 95.99,
    "HC": 16.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 0.0,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 25040.84,
    "TotalLaborCost/NetSales": 0.2616248048,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-04-21T00:00:00",
    "end_date": "2025-05-04T00:00:00",
    "net_sales": 95712.79,
    "MP_LaborCost": 25040.84,
    "MP_TotalLaborCostExcludingTips": 25040.84,
    "total_labor_cost": 25040.84,
    "labor_cost_pct": 26.162480479359136,
    "sales_per_labor_hour": 95.9911643766924,
    "labor_cost_per_hour": 25.11366964196169,
    "overtime_pct": 2.2063985558118544,
    "period_midpoint": "2025-04-27T12:00:00"
  },
  {
    "Period": "5/5-5/18",
    "Tips": 5959.82,
    "service_fee": null,
    "UC_net_sales": 88495.24,
    "UC_totalPayroll": 31191.45,
    "Tips_Distributed": 6825.92,
    "if_match": 866.1,
    "labor_cost": 24365.53,
    "labor_cost/net_sales": 0.2753,
    "total_Labor_hour": 965.6,
    "OT_hour": 10.18,
    "SPLH": 91.65,
    "HC": 15.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 0.0,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 24365.53,
    "TotalLaborCost/NetSales": 0.275331532,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-05-05T00:00:00",
    "end_date": "2025-05-18T00:00:00",
    "net_sales": 88495.24,
    "MP_LaborCost": 24365.53,
    "MP_TotalLaborCostExcludingTips": 24365.53,
    "total_labor_cost": 24365.53,
    "labor_cost_pct": 27.533153195584305,
    "sales_per_labor_hour": 91.64792874896438,
    "labor_cost_per_hour": 25.23356462303231,
    "overtime_pct": 1.0542667771333885,
    "period_midpoint": "2025-05-11T12:00:00"
  },
  {
    "Period": "5/19-6/1",
    "Tips": 6112.41,
    "service_fee": null,
    "UC_net_sales": 91213.42,
    "UC_totalPayroll": 27426.35,
    "Tips_Distributed": 6183.43,
    "if_match": 71.02,
    "labor_cost": 21242.92,
    "labor_cost/net_sales": 0.2329,
    "total_Labor_hour": 859.09,
    "OT_hour": 24.65,
    "SPLH": 106.17,
    "HC": 14.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 0.0,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 21242.92,
    "TotalLaborCost/NetSales": 0.2328924845,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-05-19T00:00:00",
    "end_date": "2025-06-01T00:00:00",
    "net_sales": 91213.42,
    "MP_LaborCost": 21242.92,
    "MP_TotalLaborCostExcludingTips": 21242.92,
    "total_labor_cost": 21242.92,
    "labor_cost_pct": 23.289248446116808,
    "sales_per_labor_hour": 106.17446367668113,
    "labor_cost_per_hour": 24.727234631994317,
    "overtime_pct": 2.869315205624556,
    "period_midpoint": "2025-05-25T12:00:00"
  },
  {
    "Period": "6/2-6/15",
    "Tips": 5654.16,
    "service_fee": 0.0,
    "UC_net_sales": 82435.44,
    "UC_totalPayroll": 20409.04,
    "Tips_Distributed": 3789.98,
    "if_match": -1864.18,
    "labor_cost": 16619.06,
    "labor_cost/net_sales": 0.2016,
    "total_Labor_hour": 571.39,
    "OT_hour": 11.39,
    "SPLH": 144.27,
    "HC": 9.0,
    "Payroll_Dismissal": 8472.24,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 8472.24,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 25091.3,
    "TotalLaborCost/NetSales": 0.3043751571,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-06-02T00:00:00",
    "end_date": "2025-06-15T00:00:00",
    "net_sales": 82435.44,
    "MP_LaborCost": 16619.06,
    "MP_TotalLaborCostExcludingTips": 25091.3,
    "total_labor_cost": 25091.3,
    "labor_cost_pct": 30.437515709262907,
    "sales_per_labor_hour": 144.27175834368822,
    "labor_cost_per_hour": 43.91273910988992,
    "overtime_pct": 1.9933845534573584,
    "period_midpoint": "2025-06-08T12:00:00"
  },
  {
    "Period": "6/16-6/29",
    "Tips": 5295.6,
    "service_fee": 0.0,
    "UC_net_sales": 79934.79,
    "UC_totalPayroll": 23081.2,
    "Tips_Distributed": 4677.76,
    "if_match": -617.84,
    "labor_cost": 18403.44,
    "labor_cost/net_sales": 0.2302,
    "total_Labor_hour": 751.58,
    "OT_hour": 123.95,
    "SPLH": 106.36,
    "HC": 9.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 0.0,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 18403.44,
    "TotalLaborCost/NetSales": 0.2302306668,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-06-16T00:00:00",
    "end_date": "2025-06-29T00:00:00",
    "net_sales": 79934.79,
    "MP_LaborCost": 18403.44,
    "MP_TotalLaborCostExcludingTips": 18403.44,
    "total_labor_cost": 18403.44,
    "labor_cost_pct": 23.023066677225273,
    "sales_per_labor_hour": 106.35566406769738,
    "labor_cost_per_hour": 24.486335453311685,
    "overtime_pct": 16.49192368077916,
    "period_midpoint": "2025-06-22T12:00:00"
  },
  {
    "Period": "6/30-7/13",
    "Tips": 5990.79,
    "service_fee": 152.39,
    "UC_net_sales": 86061.85,
    "UC_totalPayroll": 25718.68,
    "Tips_Distributed": 5771.24,
    "if_match": -371.94,
    "labor_cost": 19947.44,
    "labor_cost/net_sales": 0.2318,
    "total_Labor_hour": 751.86,
    "OT_hour": 125.77,
    "SPLH": 114.47,
    "HC": 8.0,
    "Payroll_Dismissal": 1691.19,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": 752.5,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 2443.69,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 22391.13,
    "TotalLaborCost/NetSales": 0.2601748626,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-06-30T00:00:00",
    "end_date": "2025-07-13T00:00:00",
    "net_sales": 86061.85,
    "MP_LaborCost": 19947.44,
    "MP_TotalLaborCostExcludingTips": 22391.13,
    "total_labor_cost": 22391.13,
    "labor_cost_pct": 26.017486261334145,
    "sales_per_labor_hour": 114.46525948979864,
    "labor_cost_per_hour": 29.78098316175884,
    "overtime_pct": 16.727848269624662,
    "period_midpoint": "2025-07-06T12:00:00"
  },
  {
    "Period": "7/14-7/27",
    "Tips": 5843.03,
    "service_fee": 329.35,
    "UC_net_sales": 87963.57,
    "UC_totalPayroll": 29132.78,
    "Tips_Distributed": 5603.2,
    "if_match": -239.83,
    "labor_cost": 23529.58,
    "labor_cost/net_sales": 0.2674923267,
    "total_Labor_hour": 963.74,
    "OT_hour": 234.22,
    "SPLH": 91.27313383,
    "HC": 10.0,
    "Payroll_Dismissal": 1228.39,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": 1621.77,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 2850.16,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 26379.74,
    "TotalLaborCost/NetSales": 0.299893922,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-07-14T00:00:00",
    "end_date": "2025-07-27T00:00:00",
    "net_sales": 87963.57,
    "MP_LaborCost": 23529.58,
    "MP_TotalLaborCostExcludingTips": 26379.74,
    "total_labor_cost": 26379.74,
    "labor_cost_pct": 29.989392199520776,
    "sales_per_labor_hour": 91.27313383277648,
    "labor_cost_per_hour": 27.37225807790483,
    "overtime_pct": 24.303235312428665,
    "period_midpoint": "2025-07-20T12:00:00"
  },
  {
    "Period": "7/28-8/10",
    "Tips": 5958.28,
    "service_fee": 1728.76,
    "UC_net_sales": 91895.74,
    "UC_totalPayroll": 32592.15,
    "Tips_Distributed": 7169.84,
    "if_match": 1211.56,
    "labor_cost": 25422.31,
    "labor_cost/net_sales": 0.2766429652,
    "total_Labor_hour": 1033.77,
    "OT_hour": 313.77,
    "SPLH": 88.89379649,
    "HC": 10.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 0.0,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 25422.31,
    "TotalLaborCost/NetSales": 0.2766429652,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-07-28T00:00:00",
    "end_date": "2025-08-10T00:00:00",
    "net_sales": 91895.74,
    "MP_LaborCost": 25422.31,
    "MP_TotalLaborCostExcludingTips": 25422.31,
    "total_labor_cost": 25422.31,
    "labor_cost_pct": 27.664296516900567,
    "sales_per_labor_hour": 88.89379649244997,
    "labor_cost_per_hour": 24.591843446801516,
    "overtime_pct": 30.35201253663774,
    "period_midpoint": "2025-08-03T12:00:00"
  },
  {
    "Period": "8/11-8/24",
    "Tips": 5751.64,
    "service_fee": 1033.58,
    "UC_net_sales": 87731.7,
    "UC_totalPayroll": 27285.51,
    "Tips_Distributed": 6346.28,
    "if_match": 594.64,
    "labor_cost": 20939.23,
    "labor_cost/net_sales": 0.2386734783,
    "total_Labor_hour": 877.5,
    "OT_hour": 209.94,
    "SPLH": 99.9791453,
    "HC": 11.0,
    "Payroll_Dismissal": 0.0,
    "Payroll_NewHire": 841.14,
    "Payroll_OffCycle": 205.87,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 1047.01,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 21986.24,
    "TotalLaborCost/NetSales": 0.2506077051,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-08-11T00:00:00",
    "end_date": "2025-08-24T00:00:00",
    "net_sales": 87731.7,
    "MP_LaborCost": 20939.23,
    "MP_TotalLaborCostExcludingTips": 21986.24,
    "total_labor_cost": 21986.24,
    "labor_cost_pct": 25.060770508265545,
    "sales_per_labor_hour": 99.9791452991453,
    "labor_cost_per_hour": 25.055544159544162,
    "overtime_pct": 23.924786324786325,
    "period_midpoint": "2025-08-17T12:00:00"
  },
  {
    "Period": "8/25-9/7",
    "Tips": 5106.0,
    "service_fee": null,
    "UC_net_sales": 83410.07,
    "UC_totalPayroll": 28834.9,
    "Tips_Distributed": 5975.03,
    "if_match": 869.03,
    "labor_cost": 22859.87,
    "labor_cost/net_sales": 0.274066069,
    "total_Labor_hour": 1012.79,
    "OT_hour": 218.03,
    "SPLH": 82.35672746,
    "HC": 13.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 0.0,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": 22859.87,
    "TotalLaborCost/NetSales": 0.274066069,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-08-25T00:00:00",
    "end_date": "2025-09-07T00:00:00",
    "net_sales": 83410.07,
    "MP_LaborCost": 22859.87,
    "MP_TotalLaborCostExcludingTips": 22859.87,
    "total_labor_cost": 22859.87,
    "labor_cost_pct": 27.406606900102105,
    "sales_per_labor_hour": 82.35672745583982,
    "labor_cost_per_hour": 22.571184549610482,
    "overtime_pct": 21.52766121308465,
    "period_midpoint": "2025-08-31T12:00:00"
  },
  {
    "Period": "9/8-9/21",
    "Tips": 5454.08,
    "service_fee": null,
    "UC_net_sales": 82020.83,
    "UC_totalPayroll": 29403.02,
    "Tips_Distributed": 5902.09,
    "if_match": 448.01,
    "labor_cost": 23500.93,
    "labor_cost/net_sales": 0.2865239233,
    "total_Labor_hour": 961.95,
    "OT_hour": 194.54,
    "SPLH": 85.26516971,
    "HC": 11.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 0.0,
    "Other": 1800.0,
    "UC_TotalLaborCostExcludingTips": 25300.93,
    "TotalLaborCost/NetSales": 0.308469568,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-09-08T00:00:00",
    "end_date": "2025-09-21T00:00:00",
    "net_sales": 82020.83,
    "MP_LaborCost": 23500.93,
    "MP_TotalLaborCostExcludingTips": 25300.93,
    "total_labor_cost": 25300.93,
    "labor_cost_pct": 30.84695680353393,
    "sales_per_labor_hour": 85.26516970736525,
    "labor_cost_per_hour": 26.301710068090856,
    "overtime_pct": 20.22350434014242,
    "period_midpoint": "2025-09-14T12:00:00"
  },
  {
    "Period": "9/22-10/5",
    "Tips": 5971.93,
    "service_fee": null,
    "UC_net_sales": 101175.15,
    "UC_totalPayroll": 27734.23,
    "Tips_Distributed": 5910.54,
    "if_match": -61.39,
    "labor_cost": 21823.69,
    "labor_cost/net_sales": 0.215702077,
    "total_Labor_hour": 894.74,
    "OT_hour": 172.3,
    "SPLH": 113.0777097,
    "HC": 10.0,
    "Payroll_Dismissal": 953.6,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 953.6,
    "Other": 1800.0,
    "UC_TotalLaborCostExcludingTips": 24577.29,
    "TotalLaborCost/NetSales": 0.2429182462,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-09-22T00:00:00",
    "end_date": "2025-10-05T00:00:00",
    "net_sales": 101175.15,
    "MP_LaborCost": 21823.69,
    "MP_TotalLaborCostExcludingTips": 24577.29,
    "total_labor_cost": 24577.29,
    "labor_cost_pct": 24.29182462294348,
    "sales_per_labor_hour": 113.07770972573037,
    "labor_cost_per_hour": 27.468638934215527,
    "overtime_pct": 19.256990857679327,
    "period_midpoint": "2025-09-28T12:00:00"
  },
  {
    "Period": "10/6-10/19",
    "Tips": 6024.83,
    "service_fee": null,
    "UC_net_sales": 87908.24,
    "UC_totalPayroll": 28440.97,
    "Tips_Distributed": 6494.69,
    "if_match": 469.86,
    "labor_cost": 21946.28,
    "labor_cost/net_sales": 0.2496498622,
    "total_Labor_hour": 1156.49,
    "OT_hour": 171.88,
    "SPLH": 76.01297028,
    "HC": 10.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 0.0,
    "Other": 1800.0,
    "UC_TotalLaborCostExcludingTips": 23746.28,
    "TotalLaborCost/NetSales": 0.2701257584,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-10-06T00:00:00",
    "end_date": "2025-10-19T00:00:00",
    "net_sales": 87908.24,
    "MP_LaborCost": 21946.28,
    "MP_TotalLaborCostExcludingTips": 23746.28,
    "total_labor_cost": 23746.28,
    "labor_cost_pct": 27.012575840444537,
    "sales_per_labor_hour": 76.01297028076335,
    "labor_cost_per_hour": 20.533061245665763,
    "overtime_pct": 14.862212384024073,
    "period_midpoint": "2025-10-12T12:00:00"
  },
  {
    "Period": "10/22-11/02",
    "Tips": 5671.33,
    "service_fee": null,
    "UC_net_sales": 86786.5,
    "UC_totalPayroll": 27429.99,
    "Tips_Distributed": 6575.28,
    "if_match": 903.95,
    "labor_cost": 20854.71,
    "labor_cost/net_sales": 0.2402990096,
    "total_Labor_hour": 902.4,
    "OT_hour": 166.14,
    "SPLH": 96.17298316,
    "HC": 12.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": 0.0,
    "Other": 1800.0,
    "UC_TotalLaborCostExcludingTips": 22654.71,
    "TotalLaborCost/NetSales": 0.2610395626,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-10-22T00:00:00",
    "end_date": "2025-11-02T00:00:00",
    "net_sales": 86786.5,
    "MP_LaborCost": 20854.71,
    "MP_TotalLaborCostExcludingTips": 22654.71,
    "total_labor_cost": 22654.71,
    "labor_cost_pct": 26.1039562604783,
    "sales_per_labor_hour": 96.17298315602837,
    "labor_cost_per_hour": 25.104953457446808,
    "overtime_pct": 18.410904255319146,
    "period_midpoint": "2025-10-27T12:00:00"
  },
  {
    "Period": "11/03-11/16",
    "Tips": 6559.27,
    "service_fee": null,
    "UC_net_sales": 93882.15,
    "UC_totalPayroll": 28762.55,
    "Tips_Distributed": 7213.48,
    "if_match": 654.21,
    "labor_cost": 21549.07,
    "labor_cost/net_sales": 0.2295331967,
    "total_Labor_hour": 875.67,
    "OT_hour": 163.17,
    "SPLH": 107.2117921,
    "HC": 11.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": 687.27,
    "Payroll_NonRegularTotal": 687.27,
    "Other": 1800.0,
    "UC_TotalLaborCostExcludingTips": 24036.34,
    "TotalLaborCost/NetSales": 0.2560267314,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-11-03T00:00:00",
    "end_date": "2025-11-16T00:00:00",
    "net_sales": 93882.15,
    "MP_LaborCost": 21549.07,
    "MP_TotalLaborCostExcludingTips": 24036.34,
    "total_labor_cost": 24036.34,
    "labor_cost_pct": 25.60267313861048,
    "sales_per_labor_hour": 107.2117921134674,
    "labor_cost_per_hour": 27.44908470085763,
    "overtime_pct": 18.633731885299255,
    "period_midpoint": "2025-11-09T12:00:00"
  },
  {
    "Period": "11/17-11/30",
    "Tips": 6733.1,
    "service_fee": null,
    "UC_net_sales": 97062.08,
    "UC_totalPayroll": 30042.08,
    "Tips_Distributed": 7305.26,
    "if_match": 572.16,
    "labor_cost": 22736.82,
    "labor_cost/net_sales": 0.234250286,
    "total_Labor_hour": 913.5799999999999,
    "OT_hour": 197.16,
    "SPLH": 106.2436568,
    "HC": 11.0,
    "Payroll_Dismissal": 195.12,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": 1177.42,
    "Payroll_NonRegularTotal": 1372.54,
    "Other": 1800.0,
    "UC_TotalLaborCostExcludingTips": 25909.36,
    "TotalLaborCost/NetSales": 0.2669359651,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-11-17T00:00:00",
    "end_date": "2025-11-30T00:00:00",
    "net_sales": 97062.08,
    "MP_LaborCost": 22736.82,
    "MP_TotalLaborCostExcludingTips": 25909.36,
    "total_labor_cost": 25909.36,
    "labor_cost_pct": 26.693596510604344,
    "sales_per_labor_hour": 106.24365682260996,
    "labor_cost_per_hour": 28.360253070338672,
    "overtime_pct": 21.58103285973861,
    "period_midpoint": "2025-11-23T12:00:00"
  },
  {
    "Period": "12/1-12/14",
    "Tips": 6812.98,
    "service_fee": null,
    "UC_net_sales": 100208.41,
    "UC_totalPayroll": 34964.12,
    "Tips_Distributed": 7774.39,
    "if_match": 961.41,
    "labor_cost": 27189.73,
    "labor_cost/net_sales": 0.2713318174,
    "total_Labor_hour": 1055.79,
    "OT_hour": 274.44,
    "SPLH": 94.91320244,
    "HC": 11.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": null,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": null,
    "TotalLaborCost/NetSales": null,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-12-01T00:00:00",
    "end_date": "2025-12-14T00:00:00",
    "net_sales": 100208.41,
    "MP_LaborCost": 27189.73,
    "MP_TotalLaborCostExcludingTips": null,
    "total_labor_cost": 27189.73,
    "labor_cost_pct": 27.133181735944117,
    "sales_per_labor_hour": 94.91320243609051,
    "labor_cost_per_hour": 25.75297170838898,
    "overtime_pct": 25.99380558633819,
    "period_midpoint": "2025-12-07T12:00:00"
  },
  {
    "Period": "12/15-12/28",
    "Tips": 6785.63,
    "service_fee": null,
    "UC_net_sales": 106095.07,
    "UC_totalPayroll": 35903.01,
    "Tips_Distributed": 7960.96,
    "if_match": 1175.33,
    "labor_cost": 27942.05,
    "labor_cost/net_sales": 0.263368034,
    "total_Labor_hour": 1050.23,
    "OT_hour": 301.09,
    "SPLH": 101.0207954,
    "HC": 12.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": 122.93,
    "Payroll_NonRegularTotal": null,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": null,
    "TotalLaborCost/NetSales": null,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-12-15T00:00:00",
    "end_date": "2025-12-28T00:00:00",
    "net_sales": 106095.07,
    "MP_LaborCost": 27942.05,
    "MP_TotalLaborCostExcludingTips": null,
    "total_labor_cost": 27942.05,
    "labor_cost_pct": 26.336803397179526,
    "sales_per_labor_hour": 101.02079544480733,
    "labor_cost_per_hour": 26.6056482865658,
    "overtime_pct": 28.668958228197628,
    "period_midpoint": "2025-12-21T12:00:00"
  },
  {
    "Period": "12/29-01/11",
    "Tips": null,
    "service_fee": null,
    "UC_net_sales": 122447.01,
    "UC_totalPayroll": 36621.12,
    "Tips_Distributed": 8603.09,
    "if_match": null,
    "labor_cost": null,
    "labor_cost/net_sales": null,
    "total_Labor_hour": 1064.1,
    "OT_hour": 287.03,
    "SPLH": 115.0709614,
    "HC": 13.0,
    "Payroll_Dismissal": null,
    "Payroll_NewHire": null,
    "Payroll_OffCycle": null,
    "Payroll_NonGusto": null,
    "Payroll_Fixing": null,
    "Payroll_NonRegularTotal": null,
    "Other": null,
    "UC_TotalLaborCostExcludingTips": null,
    "TotalLaborCost/NetSales": null,
    "Unnamed: 22": null,
    "UC（Union City）": null,
    "start_date": "2025-12-29T00:00:00",
    "end_date": "2026-01-11T00:00:00",
    "net_sales": 122447.01,
    "MP_LaborCost": null,
    "MP_TotalLaborCostExcludingTips": null,
    "total_labor_cost": null,
    "labor_cost_pct": null,
    "sales_per_labor_hour": 115.07096137581055,
    "labor_cost_per_hour": null,
    "overtime_pct": 26.97396861197256,
    "period_midpoint": "2026-01-04T12:00:00"
  }
]
    </script>

    <div class="section">
        <h2>执行摘要</h2>
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="label">总净销售额</div>
                <div class="value">$2,668,981.03</div>
            </div>
            <div class="metric-card">
                <div class="label">总人工成本</div>
                <div class="value">$675,887.93</div>
            </div>
            <div class="metric-card">
                <div class="label">平均人工成本占比</div>
                <div class="value">25.32%</div>
            </div>
            <div class="metric-card">
                <div class="label">总人工工时</div>
                <div class="value">27,340.89</div>
            </div>
            <div class="metric-card">
                <div class="label">平均每小时销售额</div>
                <div class="value">$99.89</div>
            </div>
        </div>
    </div>
    
    <div class="section">
        <h2>最新一期 Payroll 运行概览</h2>
        <div id="recentPayrollAnalysis" style="line-height: 1.8;">
            <p>正在加载数据...</p>
        </div>
    </div>
    
    <div class="section">
        <h2>可视化分析</h2>
        <div class="chart-tabs">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="switchTab('labor_cost', this)">Labor Cost</button>
                <button class="tab-button" onclick="switchTab('splh', this)">Sales Per Labor Hour</button>
                <button class="tab-button" onclick="switchTab('overtime', this)">Overtime</button>
            </div>
            
            <div id="tab-labor_cost" class="tab-content active">
                <div class="chart-image">
                    <canvas id="laborCostChart" style="max-width: 100%; height: 500px;"></canvas>
                </div>
            </div>
            
            <div id="tab-splh" class="tab-content">
                <div class="chart-image">
                    <canvas id="splhChart" style="max-width: 100%; height: 500px;"></canvas>
                </div>
            </div>
            
            <div id="tab-overtime" class="tab-content">
                <div class="chart-image">
                    <canvas id="overtimeChart" style="max-width: 100%; height: 500px;"></canvas>
                </div>
            </div>
        </div>
    </div>
        <div class="section">
        <h2>关键指标</h2>
        <table id="keyMetricsTable">
            <tr>
                <th>指标</th>
                <th>数值</th>
            </tr>
            <tr>
                <td>分析时间段数</td>
                <td>27 个</td>
            </tr>
            <tr>
                <td>平均人工成本占比</td>
                <td>26.57%</td>
            </tr>
            <tr>
                <td>最低人工成本占比</td>
                <td>21.51% (时间段: 3/24-4/6)</td>
            </tr>
            <tr>
                <td>最高人工成本占比</td>
                <td>30.85% (时间段: 9/8-9/21)</td>
            </tr>
            <tr>
                <td>标准差</td>
                <td>2.24%</td>
            </tr>
            <tr>
                <td>平均每小时销售额 (SPLH)</td>
                <td>$99.89</td>
            </tr>
            <tr>
                <td>最佳 SPLH</td>
                <td>$144.27 (时间段: 6/2-6/15)</td>
            </tr>
            <tr>
                <td>最差 SPLH</td>
                <td>$76.01 (时间段: 10/6-10/19)</td>
            </tr>
            <tr>
                <td>平均加班工时占比</td>
                <td>14.60%</td>
            </tr>
            <tr>
                <td>总加班工时</td>
                <td>4,028.54 小时</td>
            </tr>
            <tr>
                <td>OT占比</td>
                <td>14.73%</td>
            </tr>
            <tr>
                <td>平均员工数量</td>
                <td>14.9 人</td>
            </tr>
        </table>
    </div>

    <div class="section">
        <h2>按时间段详细分析</h2>
        <table id="periodTable">
            <thead>
                <tr>
                    <th>时间段</th>
                    <th>净销售额</th>
                    <th>人工成本</th>
                    <th>人工成本占比</th>
                    <th>每小时销售额</th>
                    <th>总工时</th>
                    <th>加班工时</th>
                    <th>加班占比</th>
                    <th>员工数量</th>
                    <th>OT涨跌幅</th>
                    <th>人工成本涨跌幅</th>
                </tr>
            </thead>
            <tbody id="periodTableBody">

            <tr data-period="12/29-01/11">
                <td>12/29-01/11</td>
                <td>$122,447.01</td>
                <td>$nan</td>
                <td>nan%</td>
                <td>$115.07</td>
                <td>1,064.10</td>
                <td>287.03</td>
                <td>26.97%</td>
                <td>13</td>
                <td style="color: #27ae60; font-weight: bold;">-4.67%</td>
                <td style="color: #333; font-weight: bold;">nan%</td>
            </tr>

            </tbody>
        </table>
    </div>
    
    <div class="footer">
        <p>本报告由人工效率分析系统自动生成</p>
    </div>
</body>
</html>
